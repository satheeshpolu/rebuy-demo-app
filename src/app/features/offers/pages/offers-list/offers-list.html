<div class="page">
  <h1>Offers</h1>
  <div class="grid">
    <a
      class="card"
      *ngFor="let offer of offers(); trackBy: trackById"
      [routerLink]="['/offers', offer.id]"
    >
      <div class="title">{{ offer.title }}</div>
      <div class="desc">{{ offer.description }}</div>

      <div class="meta">
        <span class="price">€{{ offer.price }}</span>
        <span class="votes">Votes: {{ offer.votes }}</span>
        <span class="date">Valid until: {{ offer.validUntil }}</span>

        <div class="vote-actions">
          <button
            type="button"
            class="vote-btn"
            (click)="upvote($event, offer.id)"
            aria-label="Upvote"
            [disabled]="offer.voteType === 'up'"
          >
            ▲
          </button>

          <button
            type="button"
            class="vote-btn"
            (click)="downvote($event, offer.id)"
            aria-label="Downvote"
            [disabled]="offer.voteType === 'down'"
          >
            ▼
          </button>
        </div>
      </div>
    </a>
  </div>
  <div>
    <offer-card
      *ngFor="let p of data()?.offers; trackBy: trackById"
      [offer]="p"
      (upvote)="offersService.upvote($event)"
      (downvote)="offersService.downvote($event)"
    ></offer-card>
  </div>
</div>
